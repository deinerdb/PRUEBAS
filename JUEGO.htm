<!DOCTYPE HTML>
<html lang="es" dir="ltr">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">  
        <meta name="description" content="JUEGO HTML"/>
        <!-- Chrome, Firefox, OS y Opera -->
        <meta name="theme-color" content="#663399" />
        <!-- Windows Phone -->
        <meta name="msapplication-navbutton-color" content="#663399" />
        <title>JUEGO HTML</title>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <link rel="stylesheet" href="estilo.css" />
        <link rel="icon" href="favicon.ico" type="image/x-icon" />
        <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
        <style>
            .clearfix::after {
                content: "";
                clear: both;
                display: table;
            }

            canvas {
                background-color: black;
                /*RESPONSIVE GAME*/
                width: 92%;
                height: auto;
                float: right;
                -moz-box-sizing: border-box;
                -webkit-box-sizing: border-box;
                box-sizing: border-box;
            }
            #controles {
                text-align: center;
                width: 8%;
                
                float: left;
                /*no se puede seleccionar el texto*/
                -webkit-user-select: none; /* Chrome, Opera, Safari */
                -moz-user-select: none; /* Firefox 2+ */
                -ms-user-select: none; /* IE 10+ */
                user-select: none; /* Standard syntax */

                -moz-box-sizing: border-box;
                -webkit-box-sizing: border-box;
                box-sizing: border-box;
            }
            .btnControles {
                width: 100%;
                cursor: no-drop;
                font-size: 2em;
                font-weight: bold;
                font-family: Arial;
                
                -moz-border-radius: 4px;
                -webkit-border-radius: 4px;
                border-radius: 4px;
                
                -moz-box-sizing: border-box;
                -webkit-box-sizing: border-box;
                box-sizing: border-box;
                
                color: white;
                background: #b38cd9; /* For browsers that do not support gradients */
                background: -webkit-radial-gradient(RebeccaPurple, #b38cd9); /* Safari 5.1 to 6.0 */
                background: -o-radial-gradient(RebeccaPurple, #b38cd9); /* For Opera 11.6 to 12.0 */
                background: -moz-radial-gradient(RebeccaPurple, #b38cd9); /* For Firefox 3.6 to 15 */
                background: radial-gradient(RebeccaPurple, #b38cd9); /* Standard syntax */
            }
            .btnControles:hover, .btnControles:focus{
                opacity: 0.8;
            }
            .btnControles:active {
                color:purple;
            }
            /* On smaller screens, decrease text size of btn*/
            @media only screen and (max-width: 400px) {
                .btnControles {
                    font-size: 1.2em;                    
                }
            }
            #mainjuego {
                border-style: solid;
                border-width: 2px;
                border-color: mediumblue;
                text-align: center;
                margin-bottom: 18px;
                width: 100%;
                -moz-box-sizing: border-box;
                -webkit-box-sizing: border-box;
                box-sizing: border-box;
                /*gradiente de fondo*/
                background: mediumpurple; /* For browsers that do not support gradients */
                background: -webkit-linear-gradient(to right, rebeccapurple, mediumpurple); /* For Safari 5.1 to 6.0 */
                background: -o-linear-gradient(to right, rebeccapurple, mediumpurple); /* For Opera 11.1 to 12.0 */
                background: -moz-linear-gradient(to right, rebeccapurple, mediumpurple); /* For Firefox 3.6 to 15 */
                background: linear-gradient(to right, rebeccapurple, mediumpurple); /* Standard syntax (must be last) */
            }

            .button {
                display: inline; /* by default */
                -moz-border-radius: 4px;
                -webkit-border-radius: 4px;
                border-radius: 4px;
                border: none;
                text-align: center;
                font-size: 1em;
                padding: 8px;
                width: 130px;
                -webkit-transition: all 0.5s;
                -moz-transition: all 0.5s;
                -o-transition: all 0.5s;
                transition: all 0.5s;
                cursor: pointer;
                margin: 4px;
                /*no se puede seleccionar el texto*/
                -webkit-user-select: none; /* Chrome, Opera, Safari */
                -moz-user-select: none; /* Firefox 2+ */
                -ms-user-select: none; /* IE 10+ */
                user-select: none; /* Standard syntax */
                /*fondo*/
                color: #FFFFFF;
                background: #b38cd9; /* For browsers that do not support gradients */
                background: -webkit-radial-gradient(RebeccaPurple, #b38cd9); /* Safari 5.1 to 6.0 */
                background: -o-radial-gradient(RebeccaPurple, #b38cd9); /* For Opera 11.6 to 12.0 */
                background: -moz-radial-gradient(RebeccaPurple, #b38cd9); /* For Firefox 3.6 to 15 */
                background: radial-gradient(RebeccaPurple, #b38cd9); /* Standard syntax */
            }

            .button span {
                  cursor: pointer;
                  display: inline-block;
                  position: relative;
                  -moz-transition: 0.5s;
                  -o-transition: 0.5s;
                  -webkit-transition: 0.5s;
                  transition: 0.5s;
            }

            .button span:after {
                  content: '\00bb';
                  position: absolute;
                  opacity: 0;
                  filter: Alpha(opacity=0);/* IE8 and earlier */
                  top: 0;
                  right: -20px;
                  -moz-transition: 0.5s;
                  -o-transition: 0.5s;
                  -webkit-transition: 0.5s;
                  transition: 0.5s;
            }

            .button:hover span {
                padding-right: 15px;
            }

            .button:hover span:after {
                  opacity: 1;
                  filter: Alpha(opacity=100);/* IE8 and earlier */
                  right: 0;
            }
            #accordion, #panel, textarea {
                /*no se puede seleccionar el texto*/
                -webkit-user-select: none !important; /* Chrome, Opera, Safari */
                -moz-user-select: none !important; /* Firefox 2+ */
                -ms-user-select: none !important; /* IE 10+ */
                user-select: none !important; /* Standard syntax */
            }
        </style>                     
    </head>
    <body>
        <div id="mySidenav" class="sidenav">
            <a href="INDEX.htm"><i class="fa fa-home"></i>INICIO</a>
            <a href="HTML.htm"><i class="fa fa-html5"></i>HTML</a>
            <a href="CSS.htm"><i class="fa fa-css3"></i>CSS</a>
            <a href="JAVASCRIPT.htm"><i class="fa fa-code"></i>JAVASCRIPT</a>
            <a href="MEDIA.htm"><i class="fa fa-play"></i>MULTIMEDIA</a>
            <a href="FILTROS.htm"><i class="fa fa-paint-brush"></i>FILTROS</a>
            <a href="CANVAS.htm"><i class="fa fa-file-image-o"></i>CANVAS</a>
            <a class="selected" id="selectedsidenav" href="JUEGO.htm"><i class="fa fa-gamepad"></i>JUEGO</a>
            <a href="SVG.htm"><i class="fa fa-picture-o"></i>SVG</a>
            <a href="SITIOS.htm"><i class="fa fa-globe"></i>SITIOS</a>
            <a href="FORM.htm"><i class="fa fa-file-text-o"></i>FORMULARIOS</a>
            <hr />
            <a href="#" onclick="imprimir()"><i class="fa fa-print"></i>IMPRIMIR</a>
        </div>
        <div id="relleno">
            relleno
        </div>
        <div id="overlay" onclick="soloCerrar()">
        </div>
        <div class="caja">
            <div class="container" id="container" onclick="myFunction(this)">
                <div class="bar1"></div>
                <div class="bar2"></div>
                <div class="bar3"></div>
            </div>
            <div class="navbar" id="navbar" onclick="soloCerrar()">
                <a href="INDEX.htm"><i class="fa fa-home"></i>VOLVER AL INICIO</a>
                <a href="HTML.htm"><i class="fa fa-html5"></i>HTML</a>
                <a href="CSS.htm"><i class="fa fa-css3"></i>CSS</a>
                <a href="JAVASCRIPT.htm"><i class="fa fa-code"></i>JAVASCRIPT</a>
                <a href="MEDIA.htm"><i class="fa fa-play"></i>MULTIMEDIA</a>
                <a href="FILTROS.htm"><i class="fa fa-paint-brush"></i>FILTROS</a>
                <a href="CANVAS.htm"><i class="fa fa-file-image-o"></i>CANVAS</a>
                <a class="selected" id="selectednavbar" href="JUEGO.htm"><i class="fa fa-gamepad"></i>JUEGO</a>
                <a href="SVG.htm"><i class="fa fa-picture-o"></i>SVG</a>
                <a href="SITIOS.htm"><i class="fa fa-globe"></i>SITIOS</a>
                <a href="FORM.htm"><i class="fa fa-file-text-o"></i>FORMULARIOS</a>
                <span id="separador">|</span>
                <a href="#" onclick="imprimir()"><i class="fa fa-print"></i>IMPRIMIR</a>

            </div>
        </div>
            <div class="main" id="main">
                <div id="mainjuego" class="clearfix">
                    <div id="controles">
                        <button disabled="disabled" class="btnControles" id="btnUp" title="Subir (tecla -)" onmousedown="moveup()" onmouseup="clearmove()" ontouchstart="moveup()" ontouchend="clearmove()">&#8593;</button>
                        <!--
                        <button onmousedown="moveleft()" onmouseup="clearmove()" ontouchstart="moveleft()" ontouchend="clearmove()">&#8592;</button>
                        <button onmousedown="moveright()" onmouseup="clearmove()" ontouchstart="moveright()" ontouchend="clearmove()">&#8594;</button><br><br>
                        -->
                        <button disabled="disabled" class="btnControles" id="btnDown" title="Bajar (tecla +)" onmousedown="movedown()" onmouseup="clearmove()" ontouchstart="movedown()" ontouchend="clearmove()">&#8595;</button>
                    </div>
                    <br />
                    <button id="iniciar" class="button" onclick="Jugar()"><span>Iniciar </span></button>
                </div>
                <script>

                    var myMusic;
                    var myGamePiece;
                    var myBackground;
                    var interval;
                    var primeraVez = true;
                    var intervalRedibujar;
                    var img1;
                    var img2;
                    var img3;                    
                    
                    function alturaBotones() {
                        document.getElementById("btnUp").style.height = myGameArea.canvas.scrollHeight / 2 + "px";
                        document.getElementById("btnDown").style.height = myGameArea.canvas.scrollHeight / 2 + "px";
                    }


                    function startGame() {                                                                        
                        myGamePiece = new component(30 * 180 / 270, 30 * 180 / 270, "nave.png", 75, 75, "image");
                        myBackground = new component(600, 220, "fondojuego.jpg", 0, 0, "background");
                        myGameArea.start();
                        
                    }

                    var myGameArea = {
                        canvas : document.createElement("canvas"),
                        start : function() {
                            this.canvas.width = 480;
                            this.canvas.height = 180;
                            this.context = this.canvas.getContext("2d");
                            //document.body.insertBefore(this.canvas, document.body.childNodes[0]);
                            var midiv = document.getElementById("mainjuego");
                            midiv.insertBefore(this.canvas, midiv.childNodes[2]);

                            myMusic = new sound("gametheme.mp3", "true");
                            //una sola vez
                            updateGameArea();
                            //eventos de teclado
                            window.addEventListener('keydown', function (e) {
                                myGameArea.key = e.keyCode;
                            })
                            window.addEventListener('keyup', function (e) {
                                //alert("up");
                                myGameArea.key = false;
                                //deja de moverse al soltar cualquiera
                                clearmove(); 
                            })
                            alturaBotones();
                            //this.interval = setInterval(updateGameArea, 20);
                        },
                        clear: function () {
                            this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);
                        }
                       
                    }
					
                    function component(width, height, color, x, y, type) {
                        this.type = type;
                        if (type == "image" || type == "background") {
                            this.image = new Image();
                            this.image.src = color;
                        }
						this.width = width;
                        this.height = height;
                        this.speedX = 0;
                        this.speedY = 0;
						this.x = x;
						this.y = y;
						this.update = function () {
						    ctx = myGameArea.context;                            
                            //no pasa del área de juego
                            if (this.y < 0) { this.y = 0; }
                            if (this.y > 180 - height) { this.y = 180 - height; }
                            //si es un fondo se dibuja dos veces
                            if (type == "image" || type == "background") {
                                ctx.drawImage(this.image,
                                    this.x,
                                    this.y,
                                    this.width, this.height);
                                //si es un fondo se dibuja dos veces
                                if (type == "background") {
                                    ctx.drawImage(this.image,
                                        this.x + this.width, this.y, this.width, this.height);
                                }
                                if (primeraVez == true) {
                                                                        
                                    primeraVez = false;
                                    
                                    img1 = new Image();
                                    img2 = new Image();
                                    img3 = new Image();

                                    img1.src = "fondojuego.jpg";
                                    img2.src = "nave.png";
                                    img3.src = "navemov.png";
                                    
                                    intervalRedibujar = setInterval(this.reDibujar, 40);
                                }
                            } else {
                                //dibuja
                                ctx.fillStyle = color;
                                ctx.fillRect(this.x, this.y, this.width, this.height);                                
                            }
                        }
                        this.reDibujar = function () {
                                   
                            //fondo
                            ctx.drawImage(img1,
                                0,
                                0,
                                600, 220);
                            //fondo se dibuja dos veces                            
                            ctx.drawImage(img1,
                                600, 0, 600, 220);
                            
                            //nave
                            ctx.drawImage(img2,
                                75,
                                75,
                                30 * 180 / 270, 30 * 180 / 270);
                            //navemov
                            ctx.drawImage(img3,
                                75,
                                75,
                                30 * 180 / 270, 30 * 180 / 270);

                        } 
                        this.newPos = function () {
                            this.x += this.speedX;
                            this.y += this.speedY;
                            if (this.type == "background") {
                                if (this.x == -(this.width)) {
                                    this.x = 0;
                                }
                            }
                        } 
                    }

                    function updateGameArea() {
                        myGameArea.clear();

                        myBackground.speedX = -1; 
                        myBackground.newPos();
                        myBackground.update();
                                                        
                        if (myGameArea.key && myGameArea.key == 109) { moveup(); }
                        if (myGameArea.key && myGameArea.key == 107) { movedown(); }

                       
                        myGamePiece.newPos();
                        myGamePiece.update();
                    }

                    function moveup() {
                        myGamePiece.image.src = "navemov.png";
                        myGamePiece.speedY = -1;                        
                    }

                    function movedown() {
                        myGamePiece.image.src = "navemov.png";
                        myGamePiece.speedY = 1;                        
                    }
                    /*
                    function moveleft() {
                        myGamePiece.speedX = -1;
                    }
                    
                    function moveright() {
                        myGamePiece.speedX = 1;
                    }
                    */
                    function clearmove() {
                        myGamePiece.image.src = "nave.png";
                        myGamePiece.speedX = 0;
                        myGamePiece.speedY = 0;
                        
                    }

                    function sound(src, repetir) {
                        this.sound = document.createElement("audio");
                        this.sound.setAttribute("type", "audio/mpeg");
                        this.sound.src = src;
                        this.sound.setAttribute("preload", "auto");
                        this.sound.setAttribute("controls", "none");
                        if (repetir == "true") {
                            this.sound.setAttribute("loop", "loop");
                        }                        
                        this.sound.style.display = "none";
                        document.body.appendChild(this.sound);
                        this.play = function () {
                            this.sound.play();
                        }
                        this.stop = function () {
                            this.sound.pause();
                        }
                    }
                    function Jugar() {
                        clearInterval(intervalRedibujar);
                        myMusic.play();
                        document.getElementById("iniciar").style.display = "none";
                        topFunction();
                        interval = setInterval(updateGameArea, 20);

                        document.getElementById("btnUp").style.cursor = "pointer";
                        document.getElementById("btnDown").style.cursor= "pointer";

                        document.getElementById("btnUp").removeAttribute("disabled");
                        document.getElementById("btnDown").removeAttribute("disabled");
                        
                    }
                    function Parar() {
                        myMusic.stop();
                        document.getElementById("iniciar").style.display = "inline";
                        clearInterval(interval);

                        document.getElementById("btnUp").setAttribute("disabled", "disabled");
                        document.getElementById("btnDown").setAttribute("disabled", "disabled");

                        document.getElementById("btnUp").style.cursor = "no-drop";
                        document.getElementById("btnDown").style.cursor = "no-drop";
                    }
                    

                </script>                

                
                <button class="accordion" id="accordion">JUEGO HTML<i id="folder" class="fa" aria-hidden="true"></i></button>
                <div class="panel" id="panel">
                    <p>
                        <i class="fa fa-gamepad" aria-hidden="true"></i>
                        Este es un juego hecho con HTML, CSS y JAVASCRIPT.
                        Utilice los controles para mover la nave y evitar chocar con los obtáculos mientras disfruta la música de fondo.
                        El puntaje aumenta a medida que avanza.
                        Haga clic en "Iniciar" y diviértase.
                        <br />
                        <br />
                        <strong style="clear:left">Fragmentos del código de este juego:</strong><br />
                    </p>

<textarea readonly rows="10">
... 
myGamePiece = new component(30 * 180 / 270, 30 * 180 / 270, "blue", 10, 75);
myGameArea.start();	    
function Jugar() {                        
    myMusic.play();
    document.getElementById("iniciar").style.display = "none";
    topFunction();
    interval = setInterval(updateGameArea, 20);
}
...
</textarea>
                    <i id="arrow" class="fa fa-angle-double-up" aria-hidden="true"></i>
                </div>
                <footer>
                    <p>Coded by @deiner_db</p>
                    <a href="https://www.facebook.com/deinerdb" target="_blank" class="fa fa-facebook"></a>
                    <a href="https://twitter.com/deiner_db" target="_blank" class="fa fa-twitter"></a>
                    <a href="https://www.instagram.com/deiner_db/" target="_blank" class="fa fa-instagram"></a>
                    <a href="https://plus.google.com/+DeinerDom%C3%ADnguezBola%C3%B1o" target="_blank" class="fa fa-google-plus"></a>
                    <a href="https://www.youtube.com/user/deinerdominguez" target="_blank" class="fa fa-youtube"></a>
                    <a href="skype:live:deiner_db?call" class="fa fa-skype"></a>
                </footer>

            </div>
            <button onclick="topFunction()" id="BtnTop" title="Subir">⇧</button>
            <script type="text/javascript" charset="utf-8" src="rutinas.js"></script>
</body>
</html>

