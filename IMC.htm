<!DOCTYPE HTML>
<html lang="es" dir="ltr">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">  
        <meta name="description" content="IMC - ÍNDICE DE MASA CORPORAL"/>
        <!-- Chrome, Firefox, OS y Opera -->
        <meta name="theme-color" content="#663399" />
        <!-- Windows Phone -->
        <meta name="msapplication-navbutton-color" content="#663399" />
        <title>IMC - ÍNDICE DE MASA CORPORAL</title>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <link rel="stylesheet" href="estilo.css" />
        
        <link rel="icon" href="favicon.ico" type="image/x-icon" />
        <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
        <!--*jQuery CDN
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        este es más nuevo, pero usamos la versión vieja
    -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>

        <style>
            .loader {
                position: fixed;
                left: 0px;
                top: 0px;
                width: 100%;
                height: 100%;
                z-index: 9999;
                background: url('pageLoader.gif') 50% 50% no-repeat rgb(249,249,249);
                opacity: 0.8;
                filter: Alpha(opacity=80); /* IE8 and earlier */
            }
            .formulario {
                font-size: 1.1em;
                padding: 10px 8px;
            }
            legend {
                font-weight:bold;
            }
            #errorimc {
                color: red;
                background-color: #ffe6ea;
                display: none;
                margin: 6px;
                padding: 8px 8px 8px 12px;
                border-left-style: solid;
                border-left-color: red;
                border-left-width: 4px;
            }

            #calculadoimc {
                color: green;
                background-color: #d3f8d3;
                display: none;
                margin: 6px;
                padding: 8px 8px 8px 12px;
                border-left-style: solid;
                border-left-color: green;
                border-left-width: 4px;
            }

        </style>
    </head>
    <body>
        <div class="loader"></div>
        <script type="text/javascript">
            $(window).load(function () {
                $(".loader").fadeOut("slow");
            });
        </script>
        <div id="mySidenav" class="sidenav">
            <a href="INDEX.htm"><i class="fa fa-home"></i>INICIO</a>
            <a href="HTML.htm"><i class="fa fa-html5"></i>HTML</a>
            <a href="CSS.htm"><i class="fa fa-css3"></i>CSS</a>
            <a href="JAVASCRIPT.htm"><i class="fa fa-code"></i>JAVASCRIPT</a>            
            <a href="MEDIA.htm"><i class="fa fa-play"></i>MULTIMEDIA</a>
            <a href="FILTROS.htm"><i class="fa fa-paint-brush"></i>FILTROS</a>
            <a href="CANVAS.htm"><i class="fa fa-file-image-o"></i>CANVAS</a>
            <a href="JUEGO.htm"><i class="fa fa-gamepad"></i>JUEGO</a>
            <a href="SVG.htm"><i class="fa fa-picture-o"></i>SVG</a>
            <a href="SITIOS.htm"><i class="fa fa-globe"></i>SITIOS</a>
            <a href="FORM.htm"><i class="fa fa-file-text-o"></i>FORMULARIOS</a>
            <a href="FUENTE.htm"><i class="fa fa-font"></i>FUENTES</a>
            <a class="selected" id="selectedsidenav" href="IMC.htm"><i class="fa fa-calculator"></i>IMC</a>
            <a href="DTV.htm"><i class="fa fa-television"></i>DirecTV <sup>&#174;</sup></a>
            <a href="LOADERS.htm"><i class="fa fa-spinner"></i>LOADERS</a>
            <a href="MAP.htm"><i class="fa fa-map-marker"></i>MAPA</a>
            <a href="TRADUCTOR.htm"><i class="fa fa-google"></i>TRADUCIR</a>
            <a href="GRAFICAR.htm"><i class="fa fa-pie-chart"></i>GRAFICAR</a>
            <a href="FRASES.htm"><i class="fa fa-book"></i>FRASES</a>
            <a href="ANALIZAR.htm"><i class="fa fa-table"></i>ANALIZAR</a>
            <a href="X2.htm"><i class="fa fa-superscript"></i>EC. CUADRÁTICA</a>
            <hr />
            <a href="#" onclick="imprimir()"><i class="fa fa-print"></i>IMPRIMIR</a>
        </div>
        <div id="relleno">
            relleno
        </div>
        <div id="overlay" onclick="soloCerrar()">
        </div>
        <div class="caja">
            <div class="container" id="container" onclick="myFunction(this)">
                <div class="bar1"></div>
                <div class="bar2"></div>
                <div class="bar3"></div>
            </div>
            <div class="navbar" id="navbar" onclick="soloCerrar()">
                <a href="INDEX.htm"><i class="fa fa-home"></i>VOLVER AL INICIO</a>
                <a href="HTML.htm"><i class="fa fa-html5"></i>HTML</a>
                <a href="CSS.htm"><i class="fa fa-css3"></i>CSS</a>
                <a href="JAVASCRIPT.htm"><i class="fa fa-code"></i>JAVASCRIPT</a>
                <a href="MEDIA.htm"><i class="fa fa-play"></i>MULTIMEDIA</a>
                <a href="FILTROS.htm"><i class="fa fa-paint-brush"></i>FILTROS</a>
                <a href="CANVAS.htm"><i class="fa fa-file-image-o"></i>CANVAS</a>
                <a href="JUEGO.htm"><i class="fa fa-gamepad"></i>JUEGO</a>
                <a href="SVG.htm"><i class="fa fa-picture-o"></i>SVG</a>
                <a href="SITIOS.htm"><i class="fa fa-globe"></i>SITIOS</a>
                <a href="FORM.htm"><i class="fa fa-file-text-o"></i>FORMULARIOS</a>
                <a href="FUENTE.htm"><i class="fa fa-font"></i>FUENTES</a>
                <a class="selected" id="selectednavbar" href="IMC.htm"><i class="fa fa-calculator"></i>IMC</a>
                <a href="DTV.htm"><i class="fa fa-television"></i>DirecTV <sup>&#174;</sup></a>
                <a href="LOADERS.htm"><i class="fa fa-spinner"></i>LOADERS</a>
                <a href="MAP.htm"><i class="fa fa-map-marker"></i>MAPA</a>
                <a href="TRADUCTOR.htm"><i class="fa fa-google"></i>TRADUCIR</a>
                <a href="GRAFICAR.htm"><i class="fa fa-pie-chart"></i>GRAFICAR</a>
                <a href="FRASES.htm"><i class="fa fa-book"></i>FRASES</a>
                <a href="ANALIZAR.htm"><i class="fa fa-table"></i>ANALIZAR</a>
                <a href="X2.htm"><i class="fa fa-superscript"></i>EC. CUADRÁTICA</a>
                <span id="separador">|</span>
                <a href="#" onclick="imprimir()"><i class="fa fa-print"></i>IMPRIMIR</a>

            </div>
        </div>
 
           
            <div class="main" id="main">                
                    <button class="accordion" id="accordion">IMC<i id="folder" class="fa" aria-hidden="true"></i></button>
                    <div class="panel" id="panel">
                        <p>
                            <i class="fa fa-calculator" aria-hidden="true"></i>
                            El índice de masa corporal (IMC) es una razón matemática que asocia la masa y la talla de un individuo, ideada por el estadístico belga Adolphe Quetelet; por lo que también se conoce como índice de Quetelet.
                            Se ha utilizado como uno de los recursos para evaluar el estado nutricional, de acuerdo con los valores propuestos por la Organización Mundial de la Salud.
                            <br />
                            <br />
                            <strong style="clear:left">Fragmento de código usado en esta página:</strong><br />
                        </p>

<textarea readonly rows="9">
... 
<fieldset>
<legend>Parámetros: </legend>
<label for="peso">Peso (Kilogramos):</label> <br />
<input type="number" name="peso" id="peso" placeholder="Ingrese su peso" min="0" max="200" maxlength="7" step="0.01" autofocus /><br />
<label for="estatura">Estatura (Metros):</label> <br />
<input type="number" name="estatura" id="estatura" placeholder="Ingrese su estatura" min="0" max="3" maxlength="4" step="0.01" /><br />
</fieldset>
...
</textarea>
                        <i id="arrow" class="fa fa-angle-double-up" aria-hidden="true"></i>
                    </div>


                <form class="formulario">
                    <fieldset>
                        <legend>Parámetros: </legend>
                        <label for="peso">Peso (Kilogramos):</label> <br />
                        <input type="number" name="peso" id="peso" placeholder="Ingrese su peso" autocomplete="off" min="0" max="300" maxlength="7" step="0.01" autofocus /><br />
                        <label for="estatura">Estatura (Metros):</label> <br />
                        <input type="number" name="estatura" id="estatura" placeholder="Ingrese su estatura" autocomplete="off" min="0" max="3" maxlength="4" step="0.01" /><br />
                        <p id="errorimc">
                            <strong>Error: </strong>Parámetros incorrectos. 
                            Escriba un peso válido entre 0 y 300 kilogramos y una estatura válida entre 0 y 3 metros. 
                            Puede que deba usar otro separador decimal (coma, punto, etc...) según la configuración de su dispositivo o navegador.
                        </p>
                    </fieldset>
                    <p id="calculadoimc">
                        <strong>¡Enhorabuena! </strong>
                        Se ha calculado el IMC...
                    </p>
                    <button type="button" id="btnCalcular" title="Calcular IMC"><i class="fa fa-calculator" aria-hidden="true"></i> Calcular IMC</button>
                    <button type="button" id="btnCopiar" disabled title="Copiar resultados"><i class="fa fa-clone" aria-hidden="true"></i> Copiar Resultados</button>                    
                    <fieldset>
                        <legend>Resultados: </legend>
                        <label for="imc">IMC:</label> <br />
                        <input type="text" name="imc" id="imc" readonly /><br />
                        <label for="valoración">Valoración:</label> <br />
                        <input type="text" name="valoración" id="valoración" readonly /><br />
                        <label for="min">Peso Ideal Mínimo (Kg):</label> <br />
                        <input type="text" name="min" id="min" readonly /><br />
                        <label for="promedio">Peso Ideal Promedio (Kg):</label> <br />
                        <input type="text" name="promedio" id="promedio" readonly /><br />
                        <label for="max">Peso Ideal Máximo (Kg):</label> <br />
                        <input type="text" name="max" id="max" readonly /><br />
                    </fieldset>
                    
                </form>

                    <!--CÁLCULOS-->
                    <script>
                        //obtiene referencias

                        var imputPeso = document.getElementById("peso");
                        var imputEstatura = document.getElementById("estatura");

                        var imputIMC = document.getElementById("imc");
                        var imputValoración = document.getElementById("valoración");
                        var imputMin = document.getElementById("min");
                        var imputPromedio = document.getElementById("promedio");
                        var imputMax = document.getElementById("max");

                        var getbtnCalcular = document.getElementById("btnCalcular");
                        var getbtnCopiar = document.getElementById("btnCopiar");

                        //borra todo
                        function borrarResultados() {
                            imputIMC.value = "";
                            imputValoración.value = "";
                            imputMin.value = "";
                            imputPromedio.value = "";
                            imputMax.value = "";
                            //no hay error aún
                            document.getElementById("errorimc").style.display = "none";
                            //no informa de ningún cálculo aún
                            document.getElementById("calculadoimc").style.display = "none";
                            //nada que copiar
                            getbtnCopiar.setAttribute("disabled", "disabled");
                            
                        }

                        //parámetros deben ser correctos
                        function validarParámetros() {
                            //alert("peso " + Number(imputPeso.value));
                            //alert("estatura " + Number(imputEstatura.value));

                            if (Number(imputPeso.value) == 0 && imputPeso.value == "") {
                                imputPeso.focus();
                                return false;
                            }
                            if (Number(imputEstatura.value) == 0 && imputEstatura.value == "") {
                                imputEstatura.focus();
                                return false;
                            }

                            if (Number(imputPeso.value) < 0 || Number(imputPeso.value) > 300) {
                                imputPeso.focus();
                                return false;
                            }

                            if (Number(imputEstatura.value) < 0 || Number(imputEstatura.value) > 3) {
                                imputEstatura.focus();
                                return false;
                            }

                            return true;
                        }

                        //realiza el cálculo
                        function calcularIMC() {
                            //valida
                            if (validarParámetros() == false) { 
                                //informa del error
                                document.getElementById("errorimc").style.display = "block";
                                myError.load();
                                myError.play();
                                return;
                            }
                            //ahora sí trabaja con los datos validados...
                            //declara variables para cálculos
                            var resultadoIMC;
                            var pesoMax;
                            var pesoPromedio;
                            var pesoMin;
                            var valorar;
                            var cuadradoEstatura;
                            
                            //calcula
                            cuadradoEstatura = Math.pow(Number(imputEstatura.value), 2);
                            resultadoIMC = Number(imputPeso.value) / cuadradoEstatura;
                            valorar = "No disponible";
                            switch (true) {
                                case resultadoIMC <= 16:
                                    valorar = "Delgadez Grado III, severa";
                                    break;
                                case resultadoIMC <= 17:
                                    valorar = "Delgadez Grado II, moderada";
                                    break;
                                case resultadoIMC <= 18.5:
                                    valorar = "Delgadez Grado I, leve";
                                    break;
                                case resultadoIMC < 20:
                                    valorar = "Bajo peso, normal";
                                    break;
                                case resultadoIMC <= 25:
                                    valorar = "Normal";
                                    break;
                                case resultadoIMC <= 30:
                                    valorar = "Obesidad Grado I, leve";
                                    break;
                                case resultadoIMC <= 40:
                                    valorar = "Obesidad Grado II, media";
                                    break;
                                case resultadoIMC > 40:
                                    valorar = "Obesidad Grado III, mórbida";
                                    break;
                            }

                            pesoMin = 20 * cuadradoEstatura;
                            pesoPromedio = 22.5 * cuadradoEstatura;
                            pesoMax = 25 * cuadradoEstatura;

                            //formatea resultados: 2 decimales y configuración local
                            resultadoIMC = Number(resultadoIMC.toFixed(2)).toLocaleString();
                            pesoMin = Number(pesoMin.toFixed(2)).toLocaleString();
                            pesoPromedio = Number(pesoPromedio.toFixed(2)).toLocaleString();
                            pesoMax = Number(pesoMax.toFixed(2)).toLocaleString();

                            //escribe resultados                            
                            imputIMC.value = resultadoIMC;  
                            imputValoración.value = valorar;
                            imputMin.value = pesoMin;
                            imputPromedio.value = pesoPromedio;
                            imputMax.value = pesoMax;
                            
                                                        
                            //informa éxito en cálculo
                            document.getElementById("calculadoimc").style.display = "block";
                            myCalculado.load();
                            myCalculado.play();
                            //ya hay algo que copiar
                            getbtnCopiar.removeAttribute("disabled");

                        }
                        
                        //****************************************
                        // COPIAR
                        //copia resultados al portapapeles
                        //****************************************

                        //pasa el contenido de cada campo a una cadena
                        function copiarResultados() {
                            //aquí guardamos una referencia a cada control a copiar
                            var copyCampo;
                            //aquí vamos guardando la cadena total a copiar
                            var copyText = "*** IMC ***" + "\r" + "*** ÍNDICE DE MASA CORPORAL *** ";
                            //PARÁMETROS                            
                            copyText = copyText + "\r" + "PARÁMETROS:";
                            //PESO
                            copyCampo = imputPeso;
                            copyText = copyText + "\r" + 'PESO (KILOGRAMOS) = ' + "\t" + Number(copyCampo.value).toLocaleString();
                            //ESTATURA
                            copyCampo = imputEstatura;
                            copyText = copyText + "\r" + 'ESTATURA (METROS) = ' + "\t" + Number(copyCampo.value).toLocaleString();
                            //RESULTADOS                            
                            copyText = copyText + "\r" + "RESULTADOS:";
                            //IMC
                            copyCampo = imputIMC;
                            copyText = copyText + "\r" + 'IMC = ' + "\t" + copyCampo.value;
                            //VALORACIÓN
                            copyCampo = imputValoración;
                            copyText = copyText + "\r" + 'VALORACIÓN = ' + "\t" + copyCampo.value;
                            //MIN
                            copyCampo = imputMin;
                            copyText = copyText + "\r" + 'PESO IDEAL MÍNIMO (Kg) = ' + "\t" + copyCampo.value;
                            //PROMEDIO
                            copyCampo = imputPromedio;
                            copyText = copyText + "\r" + 'PESO IDEAL PROMEDIO (Kg) = ' + "\t" + copyCampo.value;
                            //MAX
                            copyCampo = imputMax;
                            copyText = copyText + "\r" + 'PESO IDEAL MÁXIMO (Kg) = ' + "\t" + copyCampo.value;
                            //FECHA DE GENERACIÓN
                            var d = new Date();
                            copyText = copyText + "\r" + '********';
                            copyText = copyText + "\r" + 'GENERADO: ';
                            copyText = copyText + "\r" + d.toLocaleString();
                            //finalmente copiamos la cadena completa...
                            copyToClipboard(copyText);                            
                        }

                        imputEstatura.onkeydown = function (e) {

                            var characterCode;
                            // e.key es la recomendación actual
                            if (e.key != undefined) {
                                if (e.key.toLowerCase() == "enter") {
                                    characterCode = 13;
                                }
                                else {
                                    characterCode = 0;
                                }
                            } else {
                                /* navegadores antiguos...  */
                                characterCode = e.which || e.charCode || e.keyCode || e.keyIdentifier || 0;
                            }

                            //busca solo si presionó Enter
                            if (characterCode == 13) {
                                imputEstatura.blur();
                                getbtnCalcular.focus();
                                calcularIMC();
                            }  

                                                       
                        }
                                            
                        imputPeso.onkeydown = function (e) {

                            var characterCode;
                            // e.key es la recomendación actual
                            if (e.key != undefined) {
                                if (e.key.toLowerCase() == "enter") {
                                    characterCode = 13;
                                }
                                else {
                                    characterCode = 0;
                                }
                            } else {
                                /* navegadores antiguos...  */
                                characterCode = e.which || e.charCode || e.keyCode || e.keyIdentifier || 0;
                            }

                            //busca solo si presionó Enter
                            if (characterCode == 13) {
                                imputEstatura.focus();
                            }  
                                                       
                        }

                        getbtnCalcular.onclick = function () {
                            calcularIMC();
                        }

                        getbtnCopiar.onclick = function () {
                            copiarResultados();
                            //informa que copió solo por audio
                            myCopiado.load();
                            myCopiado.play();
                        }

                        imputPeso.oninput = function () {
                            borrarResultados();
                        }
                        imputPeso.onchange = function () {
                            borrarResultados();
                        }
                        imputEstatura.oninput = function () {
                            borrarResultados();
                        }
                        imputEstatura.onchange = function () {
                            borrarResultados();                            
                        }

                        //SONIDO CUANDO CALCULA
                        myCalculado = new sound("calculado.mp3", "false");
                        //SONIDO CUANDO HAY ERROR
                        myError = new sound("error.mp3", "false");
                        //SONIDO CUANDO COPIA
                        myCopiado = new sound("copiado.mp3", "false");

                        function sound(src, repetir) {
                            this.sound = document.createElement("audio");
                            this.sound.setAttribute("type", "audio/mpeg");
                            this.sound.src = src;
                            this.sound.setAttribute("preload", "auto");
                            this.sound.setAttribute("controls", "none");
                            if (repetir == "true") {
                                this.sound.setAttribute("loop", "loop");
                            }
                            this.sound.style.display = "none";
                            document.body.appendChild(this.sound);
                            this.play = function () {
                                this.sound.play();
                            }
                            this.stop = function () {
                                this.sound.pause();
                            }
                            this.load = function () {
                                this.sound.load();
                            }
                        }

                    </script>


                    <footer>
                        <p>Coded by @deiner_db</p>
                        <img id="miFoto" title="Deiner Domínguez" alt="Foto Deiner Domínguez" src="miFoto.jpg" width="1280" height="893" />
                        <br />
                        <a href="https://www.facebook.com/deinerdb" target="_blank" class="fa fa-facebook"></a>
                        <a href="https://twitter.com/deiner_db" target="_blank" class="fa fa-twitter"></a>
                        <a href="https://www.instagram.com/deiner_db/" target="_blank" class="fa fa-instagram"></a>
                        
                        <a href="https://www.youtube.com/user/deinerdominguez" target="_blank" class="fa fa-youtube"></a>
                        <a href="skype:live:deiner_db?call" class="fa fa-skype"></a>
                    </footer>
</div>
            <button onclick="topFunction()" id="BtnTop" title="Subir">⇧</button>
            <script type="text/javascript" charset="utf-8" src="rutinas.js"></script>
</body>
</html>

